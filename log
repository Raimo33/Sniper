#0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 1.25kB done
#1 DONE 0.0s

#2 [internal] load metadata for docker.io/library/clearlinux:latest
#2 DONE 0.8s

#3 [internal] load .dockerignore
#3 transferring context: 2B done
#3 DONE 0.0s

#4 [1/9] FROM docker.io/library/clearlinux:latest@sha256:4451f0afe7c5914057d3b895fd951c60b4c2a0bf94e623b8dfaa1471f440c98c
#4 DONE 0.0s

#5 [internal] load build context
#5 transferring context: 11.10kB done
#5 DONE 0.0s

#6 [2/9] RUN swupd update
#6 CACHED

#7 [3/9] RUN swupd bundle-add make c-basic os-core-dev devpkg-openssl
#7 CACHED

#8 [4/9] COPY ./conf/sysctl.conf /etc/sysctl.conf
#8 CACHED

#9 [5/9] COPY ./build /build
#9 DONE 1.2s

#10 [6/9] RUN useradd -s /bin/bash fastaf
#10 DONE 0.3s

#11 [7/9] RUN chown -R fastaf:fastaf /build
#11 DONE 0.6s

#12 [8/9] WORKDIR /build
#12 DONE 0.1s

#13 [9/9] RUN make
#13 0.268 gcc -std=gnu23 -Wall -Wextra -Werror -fwrapv -fgnu89-inline -static -Ofast -ffast-math -fopt-info-vec-all -march=native -fomit-frame-pointer -flto -MMD -Isrcs/headers -I/usr/include -c srcs/fastaf.c -o srcs/fastaf.o
#13 0.389 gcc -std=gnu23 -Wall -Wextra -Werror -fwrapv -fgnu89-inline -static -Ofast -ffast-math -fopt-info-vec-all -march=native -fomit-frame-pointer -flto -MMD -Isrcs/headers -I/usr/include -c srcs/ws.c -o srcs/ws.o
#13 0.503 gcc -std=gnu23 -Wall -Wextra -Werror -fwrapv -fgnu89-inline -static -Ofast -ffast-math -fopt-info-vec-all -march=native -fomit-frame-pointer -flto -MMD -Isrcs/headers -I/usr/include -c srcs/fix.c -o srcs/fix.o
#13 0.583 srcs/fix.c: In function 'init_fix':
#13 0.583 srcs/fix.c:31:16: error: assignment discards 'const' qualifier from pointer target type [-Werror=discarded-qualifiers]
#13 0.583    31 |   client->keys = keys;
#13 0.583       |                ^
#13 0.584 srcs/fix.c: In function 'handle_fix_connection':
#13 0.584 srcs/fix.c:71:23: error: passing argument 2 of 'connect' from incompatible pointer type [-Wincompatible-pointer-types]
#13 0.584    71 |   connect(FIX_FILENO, &client->addr, sizeof(client->addr));
#13 0.584       |                       ^~~~~~~~~~~~~
#13 0.584       |                       |
#13 0.584       |                       struct sockaddr_in *
#13 0.584 In file included from srcs/headers/fix.h:17,
#13 0.584                  from srcs/fix.c:13:
#13 0.584 /usr/include/sys/socket.h:126:52: note: expected 'const struct sockaddr *' but argument is of type 'struct sockaddr_in *'
#13 0.584   126 | extern int connect (int __fd, __CONST_SOCKADDR_ARG __addr, socklen_t __len);
#13 0.584       |                                                    ^
#13 0.584 srcs/fix.c: In function 'send_logon':
#13 0.584 srcs/fix.c:113:1: error: no return statement in function returning non-void [-Werror=return-type]
#13 0.584   113 | }
#13 0.584       | ^
#13 0.584 srcs/fix.c:100:53: error: unused parameter 'client' [-Werror=unused-parameter]
#13 0.584   100 | static bool send_logon(const fix_client_t *restrict client)
#13 0.584       |                        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~
#13 0.584 srcs/fix.c: In function 'receive_logon':
#13 0.584 srcs/fix.c:118:1: error: no return statement in function returning non-void [-Werror=return-type]
#13 0.584   118 | }
#13 0.584       | ^
#13 0.584 srcs/fix.c:115:56: error: unused parameter 'client' [-Werror=unused-parameter]
#13 0.584   115 | static bool receive_logon(const fix_client_t *restrict client)
#13 0.584       |                           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~
#13 0.584 srcs/fix.c: In function 'send_limit_query':
#13 0.584 srcs/fix.c:123:1: error: no return statement in function returning non-void [-Werror=return-type]
#13 0.584   123 | }
#13 0.584       | ^
#13 0.584 srcs/fix.c:120:59: error: unused parameter 'client' [-Werror=unused-parameter]
#13 0.584   120 | static bool send_limit_query(const fix_client_t *restrict client)
#13 0.584       |                              ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~
#13 0.584 srcs/fix.c: In function 'receive_limit_query':
#13 0.584 srcs/fix.c:128:1: error: no return statement in function returning non-void [-Werror=return-type]
#13 0.584   128 | }
#13 0.584       | ^
#13 0.584 srcs/fix.c:125:62: error: unused parameter 'client' [-Werror=unused-parameter]
#13 0.584   125 | static bool receive_limit_query(const fix_client_t *restrict client)
#13 0.584       |                                 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~
#13 0.585 srcs/fix.c: At top level:
#13 0.585 srcs/fix.c:19:17: error: 'format_price' declared 'static' but never defined [-Werror=unused-function]
#13 0.585    19 | static void HOT format_price(const fixed_point_t price, char *buffer); //TODO 5. Zero-Cost String Formatting, Precomputed FIX template (e.g., "44=XXXX|")
#13 0.585       |                 ^~~~~~~~~~~~
#13 0.587 cc1: all warnings being treated as errors
#13 0.589 make: *** [Makefile:63: srcs/fix.o] Error 1
#13 ERROR: process "/bin/sh -c make" did not complete successfully: exit code: 2
------
 > [9/9] RUN make:
0.584       | ^
0.584 srcs/fix.c:125:62: error: unused parameter 'client' [-Werror=unused-parameter]
0.584   125 | static bool receive_limit_query(const fix_client_t *restrict client)
0.584       |                                 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~
0.585 srcs/fix.c: At top level:
0.585 srcs/fix.c:19:17: error: 'format_price' declared 'static' but never defined [-Werror=unused-function]
0.585    19 | static void HOT format_price(const fixed_point_t price, char *buffer); //TODO 5. Zero-Cost String Formatting, Precomputed FIX template (e.g., "44=XXXX|")
0.585       |                 ^~~~~~~~~~~~
0.587 cc1: all warnings being treated as errors
0.589 make: *** [Makefile:63: srcs/fix.o] Error 1
------
Dockerfile:25
--------------------
  23 |     
  24 |     WORKDIR /build
  25 | >>> RUN make
  26 |     
  27 |     ENTRYPOINT ["sysctl", "-p"]
--------------------
ERROR: failed to solve: process "/bin/sh -c make" did not complete successfully: exit code: 2
make: *** [Makefile:21: build] Error 1
